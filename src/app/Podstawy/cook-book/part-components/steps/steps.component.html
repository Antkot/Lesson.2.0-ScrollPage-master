<div class="container">
  <div class="steps">
    <ng-container *ngTemplateOutlet="information"></ng-container>
  </div>
  <ng-template #information>
    <div cdkDropList class="example-list" (cdkDropListDropped)="drop($event)" cdkDropListDisabled *ngIf="!edit">
      <div class="example-box" style="cursor: default;" *ngFor="let step of steps" cdkDrag>
        {{step}}
      </div>
    </div>
    <div cdkDropList class="example-list" (cdkDropListDropped)="drop($event)" *ngIf="edit">
      <div class="example-box def">
        <mat-form-field class="editor">
          <input matInput type="text" id="newStep" class="form-control" placeholder="Dodaj kolejny krok..."
                 required minlength="5"
                 [(ngModel)]="newStep" #name="ngModel">
        </mat-form-field>
        <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert">
          <div *ngIf="name.errors?.required">
            Brak kroku!
          </div>
          <div *ngIf="name.errors?.minlength">
            Krok musi mieć conajmniej 5 znaków
          </div>
        </div>
        <div class="menu" (click)="add(newStep)">
          <span class="material-icons">add_circle</span>
        </div>
      </div>
      <div class="example-box" *ngFor="let step of steps" cdkDrag>
        <mat-form-field class="editor" *ngIf="edited === step">
          <input matInput [(ngModel)]="editedStep" [value]='step' [placeholder]='step'>
        </mat-form-field>
        <span *ngIf="edited !== step">{{step}}</span>
        <div>
          <div class="menu" [matMenuTriggerFor]="menu">
            <mat-icon>more_vert</mat-icon>
          </div>
          <mat-menu #menu="matMenu">
            <button mat-menu-item *ngIf="edited === step" (click)="done(editedStep)">
              <mat-icon>done</mat-icon>
              <span>Gotowe</span>
            </button>
            <button mat-menu-item *ngIf="edited !== step" (click)="refactor(step)">
              <mat-icon>edit</mat-icon>
              <span>Edytuj</span>
            </button>
            <button mat-menu-item (click)="delete(step)">
              <mat-icon>delete</mat-icon>
              <span>Usuń</span>
            </button>
          </mat-menu>
        </div>
      </div>
      <div class="example-box">
        Smacznego!
      </div>

    </div>
  </ng-template>
</div>
