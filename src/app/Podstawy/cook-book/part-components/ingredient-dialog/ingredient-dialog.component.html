<span class='material-icons clickable' (click)='close.emit()'>
close
</span><h2 mat-dialog-title>Dodawanie Sk≈Çadnika</h2>

<ng-container class='mat-typography' [formGroup]='model'>
  <mat-form-field appearance='outline'>
    <mat-label>Nazwa</mat-label>
    <input matInput type='text' [matAutocomplete]='autoProduct' [matAutocompleteDisabled]='false'
           formControlName='product' />
  </mat-form-field>
  <mat-form-field appearance='outline'>
    <mat-label>Miara</mat-label>
    <input matInput type='text' [matAutocomplete]='autoMeasure' [matAutocompleteDisabled]='false'
           formControlName='measure' />
  </mat-form-field>
  <mat-form-field appearance='outline'>
    <mat-label>Kcal</mat-label>
    <input matInput type='number' formControlName='kcal' />
  </mat-form-field>

  <mat-form-field appearance='outline'>
    <mat-label>Alergie</mat-label>
    <mat-select formControlName='allergens' multiple>
      <mat-option *ngFor='let allergen of allergens$ | async' [value]='allergen.hashId'>
        {{allergen.name}}
      </mat-option>
    </mat-select>
  </mat-form-field>
</ng-container>
<ng-container>
  <button class='addButton' mat-button (click)='newProduct()' [disabled]='model.invalid'>Dodaj</button>
</ng-container>
<br />
<mat-dialog-content class='mat-typography'>
  <div *ngFor='let product of products$ | async'>
    {{product.name}} (
    <a *ngFor='let measure of product.measures'>
      {{ measure.measureId | measuresTranslator | async}},
    </a>
    )
    <br />
  </div>
</mat-dialog-content>

<mat-autocomplete #autoProduct='matAutocomplete' (optionSelected)='optionSelected("product", $event.option.value)'>
  <mat-option *ngFor='let product of autoProducts$ | async' [value]='product.productId'>
    {{product.name}}
  </mat-option>
</mat-autocomplete>

<mat-autocomplete #autoMeasure='matAutocomplete' (optionSelected)='optionSelected("measure", $event.option.value)'>
  <mat-option *ngFor='let measure of autoMeasure$ | async' [value]='measure.measureId'>
    {{measure.name}}
  </mat-option>
</mat-autocomplete>
