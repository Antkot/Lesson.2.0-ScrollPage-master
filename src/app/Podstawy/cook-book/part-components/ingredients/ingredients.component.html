<div class='container'>
  <div class='headerButtons' *ngIf='edit'>
    <app-add-ingredient (addProduct)='addProduct($event)'></app-add-ingredient>
  </div>
  <div>
    <span *ngIf='edit' [formGroup]='model' class='table'>
      <div>
        <ng-container class='mat-typography' [formGroup]='model'>
          <mat-form-field appearance='outline' class='listedOptions'>
            <mat-label>Nazwa produktu</mat-label>
            <input matInput type='text' [matAutocomplete]='autoProduct' [matAutocompleteDisabled]='false'
                   formControlName='product' />
          </mat-form-field>
        </ng-container>
      </div>
      <div>
        <mat-form-field appearance='outline' class='listedOptions'>
          <mat-label>Ilość</mat-label>
          <input type='number' matInput formControlName='amount'>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance='outline' class='listedOptions'>
          <mat-label>Miara produktu</mat-label>
     <input matInput type='text' [matAutocomplete]='autoMeasure' [matAutocompleteDisabled]='false'
            formControlName='measure' />
        </mat-form-field>
      </div>
      <div>
            <button mat-button (click)='newUsedProduct()' [disabled]='model.invalid'>Dodaj</button>
      </div>
    </span>
    <div class='table'>
      <div class='grid-item'><h4>Produkt</h4></div>
      <div class='grid-item'><h4>ilość</h4></div>
      <div class='grid-item'><h4>Miara</h4></div>
      <div class='grid-item'><h4>kcal</h4></div>
    </div>
    <div class='colorizer'>
      <div class='table' *ngFor='let product of products'>
        <div class='grid-item'>
          {{(((product.usedProductId | usedProductConnector) | async).productId | productConnect | async).name}}
        </div>
        <div class='grid-item'>
          {{((product.usedProductId | usedProductConnector) | async).amount}}
        </div>
        <div class='grid-item'>
          {{((((product.usedProductId | usedProductConnector) | async).measuresId) | measuresTranslator) | async}}
        </div>
        <div class='grid-item'>
          {{(((((product.usedProductId | usedProductConnector) | async).measuresId) | productMeasureConnector: ((product.usedProductId | usedProductConnector) | async).productId) | async) |multiplication: (((product.usedProductId | usedProductConnector) | async).amount)}}
        </div>
      </div>
    </div>
  </div>
</div>

<mat-autocomplete #autoProduct='matAutocomplete'>
  <mat-option *ngFor='let product of products$ | async' [value]='product.name'>
    {{product.name}}
  </mat-option>
</mat-autocomplete>

<mat-autocomplete #autoMeasure='matAutocomplete'>
  <mat-option *ngFor='let measure of measures$ | async' [value]='measure.name'>
    {{measure.name}}
  </mat-option>
</mat-autocomplete>
