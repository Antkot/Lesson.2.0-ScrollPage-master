<div class='container'>
  <div class='headerButtons' *ngIf='edit'>
    <app-add-ingredient (addProduct)='addProduct($event)'></app-add-ingredient>
  </div>
  <div>
    <!--    <table>-->
    <!--      <tr>-->
    <!--        <th>Produkt</th>-->
    <!--        <th>ilość</th>-->
    <!--        <th>Miara</th>-->
    <!--        <th>kcal</th>-->
    <!--      </tr>-->
    <tr *ngIf='edit' [formGroup]='model'>
      <!--      <tr *ngIf='edit'>-->
      <td>

        <ng-container class='mat-typography' [formGroup]='model'>
          <mat-form-field appearance='outline'>
            <mat-label>Nazwa</mat-label>
            <input matInput type='text' [matAutocomplete]='autoProduct' [matAutocompleteDisabled]='false'
                   formControlName='product' />
          </mat-form-field>
        </ng-container>

<!--        <mat-form-field appearance='outline'>-->
<!--          <mat-label>Nazwa produktu</mat-label>-->
<!--          <mat-select>-->
<!--            &lt;!&ndash;            <mat-option *ngFor='let product of products$ | async' [value]='product.productId' formControlName='product'>&ndash;&gt;-->
<!--            &lt;!&ndash;              {{product.name}}&ndash;&gt;-->
<!--            &lt;!&ndash;            </mat-option>&ndash;&gt;-->
<!--          </mat-select>-->
<!--        </mat-form-field>-->
      </td>
      <td>
        <mat-form-field appearance='outline'>
          <mat-label>Ilość</mat-label>
          <input type='number' matInput formControlName='amount'>
        </mat-form-field>
      </td>
      <td>
        <mat-form-field appearance='outline'>
          <mat-label>Miara produktu</mat-label>
          <mat-select>
            <!--              <mat-option *ngFor='let measure of (selectedProduct | productConnect | async).measures'-->
            <!--                          [value]='measure.measureId' formControlName='measure'>-->
            <!--                {{measure.measureId | measuresTranslator | async}}-->
            <!--              </mat-option>-->
          </mat-select>
        </mat-form-field>
      </td>
      <td>
        <button (click)='newUsedProduct()' mat-button>Dodaj</button>
      </td>
    </tr>
    <tr *ngFor='let product of products'>
      <td>
        {{(((product.usedProductId | usedProductConnector) | async).productId | productConnect | async).name}}
      </td>
      <td>
        {{((product.usedProductId | usedProductConnector) | async).amount}}
      </td>
      <td>
        {{((((product.usedProductId | usedProductConnector) | async).measuresId) | measuresTranslator) | async}}
      </td>
      <td>
        {{(((((product.usedProductId | usedProductConnector) | async).measuresId) | productMeasureConnector: ((product.usedProductId | usedProductConnector) | async).productId) | async)
      * (((product.usedProductId | usedProductConnector) | async).amount)}}
      </td>
    </tr>
    <!--    </table>-->
  </div>
</div>
<!--<datalist id='products'>-->
<!--  <option *ngFor='let product of (products$ | async)' (select)='optionSelected("product", selectedProduct)'>-->
<!--    {{product.name}}-->
<!--</datalist>-->


<mat-autocomplete #autoProduct='matAutocomplete' (optionSelected)='optionSelected("product", $event.option.value)'>
  <mat-option *ngFor='let product of autoProducts$ | async' [value]='product.productId'>
    {{product.name}}
  </mat-option>
</mat-autocomplete>
